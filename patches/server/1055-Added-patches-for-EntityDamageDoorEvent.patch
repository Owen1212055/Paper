From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: CMarcoo <cmarco.org@gmail.com>
Date: Thu, 14 Mar 2024 19:49:09 +0100
Subject: [PATCH] Added patches for EntityDamageDoorEvent.


diff --git a/src/main/java/net/minecraft/world/entity/ai/goal/BreakDoorGoal.java b/src/main/java/net/minecraft/world/entity/ai/goal/BreakDoorGoal.java
index 0d2de8e8747795393631f851cb941b268aa0a4b0..3b876ce1ea9b02e2d0854e3191710f78ac56750f 100644
--- a/src/main/java/net/minecraft/world/entity/ai/goal/BreakDoorGoal.java
+++ b/src/main/java/net/minecraft/world/entity/ai/goal/BreakDoorGoal.java
@@ -1,7 +1,6 @@
 package net.minecraft.world.entity.ai.goal;
 
 import java.util.function.Predicate;
-import io.papermc.paper.event.entity.EntityDamageDoorEvent;
 import net.minecraft.world.Difficulty;
 import net.minecraft.world.entity.Mob;
 import net.minecraft.world.level.GameRules;
@@ -58,11 +57,12 @@ public class BreakDoorGoal extends DoorInteractGoal {
     public void tick() {
         super.tick();
 
+        ++this.breakTime;
+
         // Paper start
-        EntityDamageDoorEvent event = new EntityDamageDoorEvent(this.mob.getBukkitEntity(), new CraftDoor(this.mob.level().getBlockState(this.doorPos)), this.breakTime, this.doorBreakTime);
-        event.callEvent();
+        io.papermc.paper.event.entity.EntityDamageDoorEvent event = new io.papermc.paper.event.entity.EntityDamageDoorEvent(this.mob.getBukkitEntity(), this.mob.level().getBlockState(this.doorPos).createCraftBlockData(), this.breakTime, this.doorBreakTime);
 
-        if (event.isCancelled()) {
+        if (event.callEvent()) {
             this.stop();
             return;
         }
@@ -78,7 +78,6 @@ public class BreakDoorGoal extends DoorInteractGoal {
             }
         }
 
-        ++this.breakTime;
         int i = (int) ((float) this.breakTime / (float) this.getDoorBreakTime() * 10.0F);
 
         if (i != this.lastBreakProgress) {
